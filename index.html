<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>B Prototype</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="main.js"></script>
</head>
<body class="main-bg">
  <div class="card" x-data="prototypeApp()">
    <template x-if="currentStep === 0">
      <div class="home-landing">
        <h1 class="home-title">Start Your Home Energy Retrofit Journey</h1>
        <button @click="currentStep = 1" class="home-btn">Start</button>
      </div>
    </template>
    <template x-if="currentStep > 0">
      <div>
        <h1 class="main-title">Home Energy Retrofit Prototype</h1>
        <!-- Step Indicator -->
        <div class="step-indicator">
          <!-- Step 1 circle -->
          <div class="step-indicator-item">
            <div :class="currentStep >= 1 ? 'step-circle-active' : 'step-circle'">
              <span>1</span>
            </div>
            <!-- Step 1-2 progress bar -->
            <div class="step-bar">
              <div
                class="step-bar-progress"
                :style="currentStep > 1 ? 'width:100%' : (currentStep === 1 ? 'width:' + (getStep1Progress()) + '%' : 'width:0')">
              </div>
            </div>
          </div>
          <!-- Step 2 circle -->
          <div class="step-indicator-item">
            <div :class="currentStep >= 2 ? 'step-circle-active' : 'step-circle'">
              <span>2</span>
            </div>
            <!-- Step 2-3 progress bar -->
            <div class="step-bar">
              <div
                class="step-bar-progress"
                :style="currentStep > 2 ? 'width:100%' : (currentStep === 2 ? 'width:' + (getStep2Progress()) + '%' : 'width:0')">
              </div>
            </div>
          </div>
          <!-- Step 3 circle -->
          <div class="step-indicator-item">
            <div :class="currentStep >= 3 ? 'step-circle-active' : 'step-circle'">
              <span>3</span>
            </div>
            <!-- Step 3-4 progress bar -->
            <div class="step-bar">
              <div
                class="step-bar-progress"
                :style="currentStep > 3 ? 'width:100%' : (currentStep === 3 ? 'width:' + (getStep3Progress()) + '%' : 'width:0')">
              </div>
            </div>
          </div>
          <!-- Step 4 circle -->
          <div class="step-indicator-item">
            <div :class="currentStep >= 4 ? 'step-circle-active' : 'step-circle'">
              <span>4</span>
            </div>
            <!-- Step 4-5 progress bar -->
            <div class="step-bar">
              <div
                class="step-bar-progress"
                :style="currentStep > 4 ? 'width:100%' : (currentStep === 4 ? 'width:' + (getStep4Progress()) + '%' : 'width:0')">
              </div>
            </div>
          </div>
          <!-- Step 5 circle -->
          <div class="step-indicator-item">
            <div :class="currentStep >= 10 ? 'step-circle-active' : 'step-circle'">
              <span>5</span>
            </div>
          </div>
        </div>
        <!-- Step 1: Basic Property Information -->
        <div x-show="currentStep === 1" x-transition>
          <div class="question-center">
            <template x-if="questionIndex === 0">
              <div>
                <label class="form-label">Region</label>
                <div class="question-explanation">Select your region to help us provide more accurate energy retrofit recommendations and available policy information.</div>
                <div :class="['option-list', regionOptions.length > 4 ? 'two-cols' : '']">
                  <template x-for="(item, idx) in regionOptions" :key="idx">
                    <label><input type="radio" x-model="form.region" :value="item"> <span x-text="item"></span></label>
                  </template>
                </div>
                <div class="flex-row-btns">
                  <button class="btn-main" @click="if(form.region) questionIndex++">Next</button>
                </div>
              </div>
            </template>
            <template x-if="questionIndex === 1">
              <div>
                <label class="form-label">What type of property do you own?</label>
                <div class="question-explanation">Understanding your property type helps us assess the complexity and cost of retrofitting, as different property types require different retrofit solutions.</div>
                <div :class="['option-list', propertyTypeOptions.length > 4 ? 'two-cols' : '']">
                  <template x-for="(item, idx) in propertyTypeOptions" :key="idx">
                    <label><input type="radio" x-model="form.propertyType" :value="item"> <span x-text="item"></span></label>
                  </template>
                </div>
                <div class="flex-row-btns">
                  <button class="btn-secondary" @click="questionIndex--">Back</button>
                  <button class="btn-main" @click="if(form.propertyType) questionIndex++">Next</button>
                </div>
              </div>
            </template>
            <template x-if="questionIndex === 2">
              <div>
                <label class="form-label">Property Age</label>
                <div class="question-explanation">Property age is a key factor affecting energy efficiency. Older properties typically require more retrofit measures to improve energy performance.</div>
                <div :class="['option-list', ageOptions.length > 4 ? 'two-cols' : '']">
                  <template x-for="(age, idx) in ageOptions" :key="idx">
                    <label><input type="radio" x-model="form.age" :value="age"> <span x-text="age"></span></label>
                  </template>
                </div>
                <div class="flex-row-btns">
                  <button class="btn-secondary" @click="questionIndex--">Back</button>
                  <button class="btn-main" @click="if(form.age) questionIndex++">Next</button>
                </div>
              </div>
            </template>
            <template x-if="questionIndex === 3">
              <div>
                <label class="form-label">Property Area</label>
                <div class="question-explanation">Property area affects the total retrofit cost and expected energy savings. Larger properties may require more materials and longer construction time.</div>
                <div :class="['option-list', areaOptions.length > 4 ? 'two-cols' : '']">
                  <template x-for="(area, idx) in areaOptions" :key="idx">
                    <label><input type="radio" x-model="form.area" :value="area"> <span x-text="area"></span></label>
                  </template>
                </div>
                <div class="flex-row-btns">
                  <button class="btn-secondary" @click="questionIndex--">Back</button>
                  <button class="btn-main" @click="if(form.area) nextStep()">Next</button>
                </div>
              </div>
            </template>
          </div>
        </div>
        <!-- Step 2: Property Internal Structure Information (EPC) -->
        <div x-show="currentStep === 2" x-transition>
          <div class="question-center">
            <div class="form-label" style="font-size:1.2rem;margin-bottom:1.5rem;">Property Internal Structure Information (EPC)</div>
            <template x-if="epcIndex === 0">
              <div>
                <label class="form-label">Wall Construction</label>
                <div class="question-explanation">Wall structure determines insulation effectiveness. Different wall materials require different retrofit solutions to improve energy efficiency.</div>
                <div :class="['option-list', wallOptions.length > 4 ? 'two-cols' : '']">
                  <template x-for="(item, idx) in wallOptions" :key="idx">
                    <label><input type="radio" x-model="form.wallType" :value="item"> <span x-text="item"></span></label>
                  </template>
                </div>
                <div class="flex-row-btns">
                  <button class="btn-secondary" @click="prevStep()">Back</button>
                  <button class="btn-main" @click="if(form.wallType) epcIndex++">Next</button>
                </div>
              </div>
            </template>
            <template x-if="epcIndex === 1">
              <div>
                <label class="form-label">Window Type</label>
                <div class="question-explanation">Windows are one of the main sources of heat loss in properties. Upgrading windows can significantly improve insulation and reduce energy consumption.</div>
                <div :class="['option-list', windowOptions.length > 4 ? 'two-cols' : '']">
                  <template x-for="(item, idx) in windowOptions" :key="idx">
                    <label><input type="radio" x-model="form.windowType" :value="item"> <span x-text="item"></span></label>
                  </template>
                </div>
                <div class="flex-row-btns">
                  <button class="btn-secondary" @click="epcIndex--">Back</button>
                  <button class="btn-main" @click="if(form.windowType) epcIndex++">Next</button>
                </div>
              </div>
            </template>
            <template x-if="epcIndex === 2">
              <div>
                <label class="form-label">Roof & Loft Insulation</label>
                <div class="question-explanation">Roof and loft insulation are key measures to improve property energy efficiency, effectively preventing heat loss from the top.</div>
                <div :class="['option-list', roofOptions.length > 4 ? 'two-cols' : '']">
                  <template x-for="(item, idx) in roofOptions" :key="idx">
                    <label><input type="radio" x-model="form.roofType" :value="item"> <span x-text="item"></span></label>
                  </template>
                </div>
                <div class="flex-row-btns">
                  <button class="btn-secondary" @click="epcIndex--">Back</button>
                  <button class="btn-main" @click="if(form.roofType) epcIndex++">Next</button>
                </div>
              </div>
            </template>
            <template x-if="epcIndex === 3">
              <div>
                <label class="form-label">Floor Construction</label>
                <div class="question-explanation">Floor structure affects bottom insulation effectiveness, especially important for properties with basements or suspended floors.</div>
                <div :class="['option-list', floorOptions.length > 4 ? 'two-cols' : '']">
                  <template x-for="(item, idx) in floorOptions" :key="idx">
                    <label><input type="radio" x-model="form.floorType" :value="item"> <span x-text="item"></span></label>
                  </template>
                </div>
                <div class="flex-row-btns">
                  <button class="btn-secondary" @click="epcIndex--">Back</button>
                  <button class="btn-main" @click="if(form.floorType) nextStep()">Next</button>
                </div>
              </div>
            </template>
          </div>
        </div>
        <!-- Step 3: Improvement Measures and Estimated Costs -->
        <div x-show="currentStep === 3" x-transition>
          <div class="question-center" style="width:100%;max-width:900px;margin:0;">
            <div class="form-label" style="font-size:1.2rem;margin-bottom:1.5rem;">Recommended Improvement Measures and Estimated Costs</div>
            <table style="width:100%;border-collapse:collapse;">
              <thead>
                <tr>
                  <th style="text-align:left;padding:0.5rem 1rem;width:2.5rem;"></th>
                  <th style="text-align:left;padding:0.5rem 1rem;">Improvement Measures</th>
                  <th style="text-align:left;padding:0.5rem 1rem;">Estimated Cost</th>
                  <th style="text-align:left;padding:0.5rem 1rem;">Annual Savings</th>
                </tr>
              </thead>
              <tbody>
                <template x-for="item in getImprovements()" :key="item.name">
                  <tr>
                    <td style="padding:0.5rem 1rem;text-align:center;">
                      <input type="checkbox" x-model="form.improvementSelected" :value="item.name">
                    </td>
                    <td style="padding:0.5rem 1rem;" x-text="item.name"></td>
                    <td style="padding:0.5rem 1rem;" x-text="item.cost"></td>
                    <td style="padding:0.5rem 1rem;" x-text="item.saving"></td>
                  </tr>
                </template>
              </tbody>
            </table>
            <div style="margin-top:1.5rem;font-weight:bold;font-size:1.1rem;">
              <span>Total Cost: </span><span x-text="getImprovementTotal().cost"></span>，
              <span>Total Annual Savings: </span><span x-text="getImprovementTotal().saving"></span>
              <span style="color:#64748b;font-weight:normal;">（Rough estimate only）</span>
            </div>
            <div class="flex-row-btns" style="margin-top:2rem;">
              <button class="btn-secondary" @click="prevStep()">Back</button>
              <button class="btn-main" @click="nextStep()">Next</button>
            </div>
          </div>
        </div>
        <!-- Step 4: Income Cover Cost Choice -->
        <div x-show="currentStep === 4" x-transition>
          <div class="question-center">
            <div class="form-label" style="font-size:1.2rem;margin-bottom:2rem;">Would you like to cover this cost with your income?</div>
            <div class="question-explanation">Choose your payment method based on your budget. If you need financial support, we can introduce you to loan and government welfare policy options.</div>
            <div class="option-list">
              <label><input type="radio" name="cover" x-model="form.coverChoice" value="yes"> Yes, I can afford it</label>
              <label><input type="radio" name="cover" x-model="form.coverChoice" value="no"> The cost is a bit high, I'd like to apply for a loan or grant</label>
            </div>
            <div class="flex-row-btns">
              <button class="btn-secondary" @click="prevStep()">Back</button>
              <button class="btn-main" @click="form.coverChoice==='yes' && (currentStep=5); form.coverChoice==='no' && (currentStep=6)">Next</button>
            </div>
          </div>
        </div>
        <!-- Step 5: Willingness to Provide Detailed Information for Complete Service -->
        <div x-show="currentStep === 5" x-transition>
          <div class="question-center">
            <div class="form-label" style="font-size:1.2rem;margin-bottom:2rem;">Would you like to provide detailed information to experience the complete service?</div>
            <div class="question-explanation">Providing detailed information will help us offer more precise retrofit recommendations and cost estimates, including specific construction plans and timelines.</div>
            <div class="option-list">
              <label><input type="radio" name="detail" x-model="form.detailChoice" value="yes"> I'd like to know more details</label>
              <label><input type="radio" name="detail" x-model="form.detailChoice" value="no"> Not for now</label>
            </div>
            <div class="flex-row-btns">
              <button class="btn-secondary" @click="prevStep()">Back</button>
              <button class="btn-main" :disabled="!form.detailChoice" @click="form.detailChoice==='yes' ? (previousStep=currentStep, currentStep=10) : currentStep=11">Next</button>
            </div>
          </div>
        </div>
        <!-- Step 6: Financing Options Multiple Choice -->
        <div x-show="currentStep === 6" x-transition>
          <div class="question-center">
            <div class="form-label" style="font-size:1.2rem;margin-bottom:2rem;">Please select the financing options you'd like to learn about (multiple choice)</div>
            <div class="question-explanation">Select the financing methods you're interested in. We'll provide detailed information about relevant policies and application processes to help you find the most suitable solution.</div>
            <div class="option-list">
              <label><input type="checkbox" x-model="form.financeChoice" value="loan"> Loan</label>
              <label><input type="checkbox" x-model="form.financeChoice" value="welfare"> Check eligibility for government welfare policies</label>
            </div>
            <div class="flex-row-btns">
              <button class="btn-secondary" @click="prevStep()">Back</button>
              <button class="btn-main" :disabled="form.financeChoice.length === 0" @click="goToFinanceDetail()">Next</button>
            </div>
          </div>
        </div>
        <!-- Step 7: Loan Interface -->
        <div x-show="currentStep === 7" x-transition>
          <div class="question-center">
            <div class="form-label" style="font-size:1.2rem;margin-bottom:2rem;">Loan Information</div>
            <div class="question-explanation">We partner with multiple banks to offer you preferential energy retrofit loans with rates as low as 3.5%, flexible repayment terms, making it easy to achieve property retrofitting.</div>
            <div style="margin-bottom:1.5rem;">Loan Provider: XX Bank<br>Available Amount: £10,000-£50,000<br>Annual Interest Rate: 3.5%-4.5%</div>
            <div class="option-list">
              <label><input type="radio" name="loanDetail" x-model="form.loanDetail" value="yes"> I'd like to know more details</label>
            </div>
            <div class="flex-row-btns">
              <button class="btn-secondary" @click="prevStep()">Back</button>
              <button class="btn-main" :disabled="form.loanDetail !== 'yes'" @click="currentStep=10">Next</button>
            </div>
          </div>
        </div>
        <!-- Step 8: Welfare Interface -->
        <div x-show="currentStep === 8" x-transition>
          <div class="question-center">
            <div class="form-label" style="font-size:1.2rem;margin-bottom:2rem;">Energy-Related Benefits & Government Support</div>
            <div class="question-explanation">The UK government provides various energy retrofit support schemes. Eligibility depends on your income, property type, and location. Here are the main available options:</div>
            
            <div class="policy-section">
              <h3 style="color:#0d9488;margin-bottom:0.5rem;">Green Homes Grant (Local Authority Delivery Scheme)</h3>
              <p style="margin-bottom:1rem;font-size:0.9rem;color:#64748b;">
                • Up to £10,000 for low-income households<br>
                • Covers insulation, heat pumps, solar panels<br>
                • Available in eligible local authority areas
              </p>
            </div>
            
            <div class="policy-section">
              <h3 style="color:#0d9488;margin-bottom:0.5rem;">Energy Company Obligation (ECO4)</h3>
              <p style="margin-bottom:1rem;font-size:0.9rem;color:#64748b;">
                • Free energy efficiency measures for eligible households<br>
                • Covers cavity wall insulation, loft insulation, boiler upgrades<br>
                • Must be on benefits or have low income
              </p>
            </div>
            
            <div class="policy-section">
              <h3 style="color:#0d9488;margin-bottom:0.5rem;">Boiler Upgrade Scheme</h3>
              <p style="margin-bottom:1rem;font-size:0.9rem;color:#64748b;">
                • £5,000 grant for air source heat pumps<br>
                • £6,000 grant for ground source heat pumps<br>
                • £5,000 grant for biomass boilers
              </p>
            </div>
            
            <div class="policy-section">
              <h3 style="color:#0d9488;margin-bottom:0.5rem;">VAT Reduction</h3>
              <p style="margin-bottom:1.5rem;font-size:0.9rem;color:#64748b;">
                • 0% VAT on energy-saving materials<br>
                • Applies to insulation, solar panels, heat pumps<br>
                • Available until March 2027
              </p>
            </div>
            
            <!-- More Policies Visual Indicator -->
            <div class="more-policies-hint">
              <div class="more-policies-hint-content">
                <div class="more-policies-hint-icon">⋯</div>
                <div class="more-policies-hint-text">
                  <span class="more-policies-hint-title">More Available Policies</span>
                  <span class="more-policies-hint-subtitle">Additional support schemes available on the full website</span>
                </div>
              </div>
            </div>
            
            <div class="option-list">
              <label><input type="radio" name="welfareDetail" x-model="form.welfareDetail" value="yes"> I'd like to know more details and check eligibility</label>
            </div>
            <div class="flex-row-btns">
              <button class="btn-secondary" @click="prevStep()">Back</button>
              <button class="btn-main" :disabled="form.welfareDetail !== 'yes'" @click="previousStep=currentStep, currentStep=10">Next</button>
            </div>
          </div>
        </div>
        <!-- Step 9: Loan + Welfare Combined Interface -->
        <div x-show="currentStep === 9" x-transition>
          <div class="question-center">
            <div class="form-label" style="font-size:1.2rem;margin-bottom:2rem;">Loan Information</div>
            <div class="question-explanation">Combining loans and government subsidies gives you the most cost-effective retrofit solution. Use subsidies to reduce initial costs, then use low-interest loans to cover remaining expenses.</div>
            <div style="margin-bottom:1.5rem;">Loan Provider: XX Bank<br>Available Amount: £10,000-£50,000<br>Annual Interest Rate: 3.5%-4.5%</div>
            
            <div class="form-label" style="font-size:1.2rem;margin-bottom:1rem;">Government Support Schemes</div>
            
            <div class="policy-section">
              <h3 style="color:#0d9488;margin-bottom:0.5rem;">Green Homes Grant (Local Authority Delivery Scheme)</h3>
              <p style="margin-bottom:1rem;font-size:0.9rem;color:#64748b;">
                • Up to £10,000 for low-income households<br>
                • Covers insulation, heat pumps, solar panels<br>
                • Available in eligible local authority areas
              </p>
            </div>
            
            <div class="policy-section">
              <h3 style="color:#0d9488;margin-bottom:0.5rem;">Energy Company Obligation (ECO4)</h3>
              <p style="margin-bottom:1rem;font-size:0.9rem;color:#64748b;">
                • Free energy efficiency measures for eligible households<br>
                • Covers cavity wall insulation, loft insulation, boiler upgrades<br>
                • Must be on benefits or have low income
              </p>
            </div>
            
            <div class="policy-section">
              <h3 style="color:#0d9488;margin-bottom:0.5rem;">Boiler Upgrade Scheme</h3>
              <p style="margin-bottom:1rem;font-size:0.9rem;color:#64748b;">
                • £5,000 grant for air source heat pumps<br>
                • £6,000 grant for ground source heat pumps<br>
                • £5,000 grant for biomass boilers
              </p>
            </div>
            
            <div class="policy-section">
              <h3 style="color:#0d9488;margin-bottom:0.5rem;">VAT Reduction</h3>
              <p style="margin-bottom:1.5rem;font-size:0.9rem;color:#64748b;">
                • 0% VAT on energy-saving materials<br>
                • Applies to insulation, solar panels, heat pumps<br>
                • Available until March 2027
              </p>
            </div>
            
            <!-- More Policies Visual Indicator -->
            <div class="more-policies-hint">
              <div class="more-policies-hint-content">
                <div class="more-policies-hint-icon">⋯</div>
                <div class="more-policies-hint-text">
                  <span class="more-policies-hint-title">More Available Policies</span>
                  <span class="more-policies-hint-subtitle">Additional support schemes available on the full website</span>
                </div>
              </div>
            </div>
            
            <div class="option-list">
              <label><input type="radio" name="loanWelfareDetail" x-model="form.loanWelfareDetail" value="yes"> I'd like to know more details and check eligibility</label>
            </div>
            <div class="flex-row-btns">
              <button class="btn-secondary" @click="prevStep()">Back</button>
              <button class="btn-main" :disabled="form.loanWelfareDetail !== 'yes'" @click="previousStep=currentStep, currentStep=10">Next</button>
            </div>
          </div>
        </div>
        <!-- Step 10: Detailed Information Confirmation Interface -->
        <div x-show="currentStep === 10" x-transition>
          <div class="question-center">
            <div class="form-label" style="font-size:1.5rem;margin-bottom:2rem;">Start Detailed Information Collection</div>
            <div class="question-explanation">To provide you with the most accurate retrofit solutions and cost estimates, we need to collect some detailed information, including your asset status and specific address.</div>
            <div style="margin-bottom:2rem;">
              <label style="display:flex;align-items:flex-start;gap:0.5rem;cursor:pointer;">
                <input type="checkbox" x-model="form.detailConfirmed" style="margin-top:0.2rem;">
                <span style="line-height:1.5;">You will need to provide some detailed information about your assets and address</span>
              </label>
            </div>
            <div class="flex-row-btns">
              <button class="btn-secondary" @click="prevStep()">Back</button>
              <a href="page2.html" class="btn-main" :class="!form.detailConfirmed ? 'btn-disabled' : ''" :style="!form.detailConfirmed ? 'pointer-events: none; opacity: 0.5;' : ''">Start</a>
            </div>
          </div>
        </div>
        <!-- Step 11: Thank You Interface -->
        <div x-show="currentStep === 11" x-transition>
          <div class="question-center">
            <div class="form-label" style="font-size:1.5rem;">Thank you for your experience!</div>
          </div>
        </div>
      </div>
    </template>
  </div>
</body>
</html>
